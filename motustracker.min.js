function doNotTrack(){if(!window.navigator.userAgent.match(/MSIE\s10\.0|trident\/6\.0/i))return window.navigator.doNotTrack||window.navigator.msDoNotTrack}function generateID(e){var t=e||"-";function n(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return n()+n()+t+n()+t+n()+t+n()+t+n()+n()+n()}function showPosition(e){return{latitude:e.coords.latitude,longitude:e.coords.longitude}}function MotusTracker(e){this.__init__(e)}!function(e){var t=!1;if("function"==typeof define&&define.amd&&(define(e),t=!0),"object"==typeof exports&&(module.exports=e(),t=!0),!t){var n=window.Cookies,o=window.Cookies=e();o.noConflict=function(){return window.Cookies=n,o}}}(function(){function v(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var o in n)t[o]=n[o]}return t}return function e(p){function g(e,t,n){var o;if("undefined"!=typeof document){if(1<arguments.length){if("number"==typeof(n=v({path:"/"},g.defaults,n)).expires){var i=new Date;i.setMilliseconds(i.getMilliseconds()+864e5*n.expires),n.expires=i}n.expires=n.expires?n.expires.toUTCString():"";try{o=JSON.stringify(t),/^[\{\[]/.test(o)&&(t=o)}catch(e){}t=p.write?p.write(t,e):encodeURIComponent(String(t)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=(e=(e=encodeURIComponent(String(e))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var r="";for(var a in n)n[a]&&(r+="; "+a,!0!==n[a]&&(r+="="+n[a]));return document.cookie=e+"="+t+r}e||(o={});for(var s=document.cookie?document.cookie.split("; "):[],c=/(%[0-9A-Z]{2})+/g,l=0;l<s.length;l++){var d=s[l].split("="),u=d.slice(1).join("=");this.json||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var m=d[0].replace(c,decodeURIComponent);if(u=p.read?p.read(u,m):p(u,m)||u.replace(c,decodeURIComponent),this.json)try{u=JSON.parse(u)}catch(e){}if(e===m){o=u;break}e||(o[m]=u)}catch(e){}}return o}}return(g.set=g).get=function(e){return g.call(g,e)},g.getJSON=function(){return g.apply({json:!0},[].slice.call(arguments))},g.defaults={},g.remove=function(e,t){g(e,"",v(t,{expires:-1}))},g.withConverter=e,g}(function(){})}),window.ismobile=function(){var e;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(check=!0),!1},MotusTracker.prototype={__init__:function(e){var t={interactionEvents:["mouseup","touchend"],interactionElements:["INPUT","BUTTON","A"],interactionCustom:[],conversionEvents:["submit"],conversionElements:[],interactionCustom:[]},n=this;return n.clubos="object"==typeof e.clubos&&e.clubos,n.interactionEvents="string"==typeof e.interactionEvents?e.interactionEvents:t.interactionEvents,n.interactionElements="string"==typeof e.interactionElements?e.interactionElements:t.interactionElements,n.interactionCustom="string"==typeof e.interactionCustom?e.interactionCustom:t.interactionCustom,n.conversionEvents="string"==typeof e.conversionEvents?e.conversionEvents:t.conversionEvents,n.conversionElements="string"==typeof e.conversionElements?e.conversionElements:t.conversionElements,n.interactionCustom="string"==typeof e.interactionCustom?e.interactionCustom:t.interactionCustom,n.async=!0,n.debug="boolean"==typeof e.debug&&e.debug,n.web={},n.session={},n.records=[],n.conversions=[],n.debug&&console.log("MotusTracker Initialized:",n),n.endpoint="https://motusapi.herokuapp.com",n.debug&&(n.endpoint="http://localhost:5000"),n.__initializeSession__(),n.__bindEvents__(),n},__initializeSession__:function(){var e=this,t=Cookies.get("motus_t");if("string"!=typeof t&&(t=generateID(),Cookies.set("motus_t",t)),document.location.pathname.indexOf("location")&&"object"==typeof e.clubos){var n=document.location.pathname.split("/");e.clubos.location=n[n.length-1]}e.web={origin:window.location.origin},e.session={visitor_id:t,load_start_time:(new Date).toISOString(),load_end_time:(new Date).toISOString(),referrer:document.referrer,position:!!navigator.geolocation&&navigator.geolocation.getCurrentPosition(showPosition),location:window.location.pathname,href:window.location.href,origin:window.location.origin,title:document.title,language:window.navigator.language,platform:window.navigator.platform,user_agent:window.navigator.userAgent,inner_width:window.innerWidth,inner_height:window.innerHeight,outer_width:window.outerWidth,outer_height:window.outerHeight},e.debug&&console.log("MotusTracker Session Initialized: ",e.session);var o=new XMLHttpRequest;e=this;return o.open("POST",e.endpoint+"/web/",!0),o.setRequestHeader("Content-Type","application/json; charset=UTF-8"),o.send(JSON.stringify(e)),e},__bindEvents__:function(){var n=this;if(n.interactionEvents)for(e=0;e<n.interactionEvents.length;e++)document.querySelector("body").addEventListener(n.interactionEvents[e],function(e){var t=e.target||e.srcElement;(-1<n.interactionElements.indexOf(t.tagName)||-1<n.interactionCustom.indexOf(t.className))&&(n.debug&&console.log("Captured Interaction Event: ",e.type),e.stopPropagation(),n.__recordInteraction__(e))});for(var e=0;e<n.conversionEvents.length;e++)document.querySelector("body").addEventListener(n.conversionEvents[e],function(e){e.target||e.srcElement;n.debug&&console.log("Captured Conversion Event: ",e.type),e.stopPropagation(),n.__recordConversion__(e)});return window.onbeforeunload=function(e){n.__finishSession__()},n},__recordInteraction__:function(e){var t=e.target||e.srcElement,n={event_type:e.type,inner_content:t.innerText,outer_content:t.outerText,id_name:t.id,class_name:t.className,node_name:t.nodeName,tag_name:t.tagName,content_name:t.name,content:t.innerText,date:(new Date).toISOString()};return this.records.push(n),this.debug&&console.log("New Interaction Record: ",n),this},__recordConversion__:function(e){var t=this,n=e.target||e.srcElement;if("submit"==e.type){console.log(e);var o={event_type:e.type,submit_action:n.action,submit_method:n.method,id_name:n.id,class_name:n.className,node_name:n.nodeName,tag_name:n.tagName,content_name:n.name,elements:[],date:(new Date).toISOString()};t.debug&&console.log("New Submit Record: ",o);var r=n.elements;for(i=0;i<r.length;i++){var a=r[i],s={inner_content:a.innerText,outer_content:a.outerText,id_name:a.id,class_name:a.className,node_name:a.nodeName,tag_name:a.tagName,content_name:a.name,value:a.value};"location"==a.id&&(t.clubos.location=a.value),"location"==a.name&&(t.clubos.location=a.value),o.elements.push(s)}if("object"==typeof t.clubos&&t.clubos.location){var c=new XMLHttpRequest,l=!1;for(i=0;i<t.clubos.clubIDs.length;i++){var d=t.clubos.clubIDs[i];if(d.location.toLowerCase()==t.clubos.location.replace(/[^a-zA-Z0-9]/g," ").toLowerCase()){l=d.id;break}}l&&(c.open("POST",t.endpoint+"/forward/clubos/"+l,!1),c.setRequestHeader("Content-Type","application/json;charset=UTF-8"),clubos_data=Object.assign([],o.elements),clubos_data.push({source:t.session.referrer}),clubos_data.push({visitor_id:t.session.visitor_id}),c.send(JSON.stringify(clubos_data)))}t.records.push(o)}return t},__closeSession__:function(){return this.session.load_end_time=(new Date).toISOString(),this.session.position=!!navigator.geolocation&&navigator.geolocation.getCurrentPosition(showPosition),this},__finishSession__:function(){var e=new XMLHttpRequest;return this.__closeSession__(),e.open("POST",this.endpoint+"/web/",!0),e.setRequestHeader("Content-Type","application/json; charset=UTF-8"),e.send(JSON.stringify(this)),this}};